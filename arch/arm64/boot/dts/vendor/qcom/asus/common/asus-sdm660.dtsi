// SPDX-License-Identifier: GPL-2.0
// Copyright (C) 2021 Atom-X-Devs < https://www.github.com/Atom-X-Devs >

// asus sdm660.dtsi specific diff
&firmware {
	android {
		fstab {
			vendor {
				fsmgr_flags = "wait";
				status = "ok";
			};

			system {
				compatible = "android,system";
				dev = "/dev/block/platform/soc/c0c4000.sdhci/by-name/system";
				type = "ext4";
				mnt_flags = "ro,barrier=1,discard";
				fsmgr_flags = "wait";
				status = "ok";
			};
		};
	};
};

&wdog {
	qcom,bark-time = <20000>;

};

&soc {
	gpio_keys {
		/delete-node/ camera_focus;
		/delete-node/ camera_snapshot;

		vol_up {
			gpios = <&tlmm 44 0x1>;
		};

		vol_down {
			label = "volume_down";
			gpios = <&tlmm 43 0x1>;
			linux,input-type = <1>;
			linux,code = <114>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};
	};

	usb_nop_phy: usb_nop_phy {
		compatible = "usb-nop-xceiv";
	};
};

// asus sdm660-common.dtsi specific diff
&usb3 {
	extcon = <&pm660_charger>;
	vbus_dwc3-supply = <&smb2_vbus>;

	dwc3@a800000 {
		usb-phy = <&qusb_phy0>, <&usb_nop_phy>;
		maximum-speed = "high-speed";
	};
};

&qrd_batterydata {
	/delete-node/ qcom,qrd_msm8998_skuk_3000mah;
	#include "fg-gen3-batterydata-3292665_Huaqin_QL1650cos_5000mAh.dtsi"
};

&sdhc_1 {
	qcom,vdd-always-on;
};

&qusb_phy0 {
	qcom,tune2-efuse-correction = <(-4)>;
	qcom,qusb-phy-init-seq = <0xf8 0x80
				0x83 0x84
				0x81 0x88
				0xc7 0x8c
				0x30 0x08
				0x79 0x0c
				0x21 0x10
				0x14 0x9c
				0x9f 0x1c
				0x00 0x18>;
};

&ssphy {
	status = "disabled";
};

&qusb_phy1 {
	qcom,qusb-phy-init-seq = <0xF8 0x80
				0x83 0x84
				0x81 0x88
				0xC7 0x8C
				0x30 0x08
				0x79 0x0C
				0x21 0x10
				0x14 0x9C
				0x9F 0x1C
				0x00 0x18>;
};

&i2c_2 {
	status = "okay";

	semtech@28 {
		compatible = "Semtech,sx9310";
		reg = <0x28>;
		vdd-supply = <&pm660l_l3>;
		vdd1-supply = <&pm660_l13>;
		interrupt-parent = <&tlmm>;
		Semtech,gpio-irq = <&tlmm 77 0x2008>;
		interrupts = <77 0x2>;
		pinctrl-names = "sarsensor_active", "sarsensor_suspend";
		pinctrl-0 = <&sarsensor_int_active>;
		pinctrl-1 = <&sarsensor_int_suspend>;
	};
};

&i2c_4 {
	status = "okay";

	novatek@62 {
		compatible = "novatek,NVT-ts";
		reg = <0x62>;
		avdd-supply = <&pm660l_l3>;    //VDD
		vdd-supply = <&pm660_l11>;    //VDDIO
		lcm_lab-supply = <&lcdb_ldo_vreg>;
		lcm_ibb-supply = <&lcdb_ncp_vreg>;
		novatek,irq-gpio = <&tlmm 67 0>;
		status = "ok";
	};
};

&i2c_6 {
	status = "okay";
	tfa98xx@34 {
		compatible = "nxp,tfa98xx";
		reg = <0x34>;
	};
};
